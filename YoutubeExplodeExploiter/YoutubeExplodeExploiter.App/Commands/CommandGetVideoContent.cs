//-
using System;

using YoutubeExplodeExploiter.App;


namespace YoutubeExplodeExploiter.Commands;

/// <summary>
/// Команда, скачивающая видео в файл
/// </summary>
public class CommandGetVideoContent : ICommand
{
    public YoutubeOperator? _youtubeOperator;
    public string _outputFilePath;
    public bool ContentSuccess;

    public CommandGetVideoContent(YoutubeOperator youtubeOperator,
        string outputFilePath)
    {
        _youtubeOperator = youtubeOperator;
        _outputFilePath = outputFilePath;
        ContentSuccess = false;
    }

    public void Cancel()
    {
        Console.WriteLine("Команда скачивания видео отменена");
        ContentSuccess = false;
    }

    public void Run(string videoUrl)
    {
        ContentSuccess = false;
        Console.WriteLine("Отправлена команда на скачивание видео");
        ContentSuccess = _youtubeOperator?.GetVideoContent(videoUrl, _outputFilePath) ?? false;
        Console.WriteLine("Команда на скачивание видео завершила работу");
    }
}
