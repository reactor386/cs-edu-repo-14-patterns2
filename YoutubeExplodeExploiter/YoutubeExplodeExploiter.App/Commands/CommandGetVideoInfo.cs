//-
using System;
using System.Collections.Generic;

using YoutubeExplodeExploiter.App;


namespace YoutubeExplodeExploiter.Commands;

/// <summary>
/// Команда, запрашивающая информацию о видео
/// </summary>
public class CommandGetVideoInfo : ICommand
{
    YoutubeOperator? _youtubeOperator;

    public Dictionary<string, string> VideoInfo;

    public CommandGetVideoInfo(YoutubeOperator youtubeOperator)
    {
        _youtubeOperator = youtubeOperator;
        VideoInfo = [];
    }

    public void Cancel()
    {
        Console.WriteLine("Команда запроса информации о видео отменена");
        VideoInfo = [];
    }

    public void Run(string videoUrl)
    {
        VideoInfo = [];
        Console.WriteLine("Отправлена команда на запрос информации о видео");
        VideoInfo = _youtubeOperator?.GetVideoInfo(videoUrl) ?? [];
        Console.WriteLine("Команда на запрос информации о видео завершила работу");
    }
}
