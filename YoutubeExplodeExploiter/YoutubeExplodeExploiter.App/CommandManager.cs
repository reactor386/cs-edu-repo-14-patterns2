//-
using System;
using YoutubeExplodeExploiter.Commands;


namespace YoutubeExplodeExploiter.App;

/// <summary>
/// Отправитель команд
/// </summary>
public class CommandManager
{
    private string _videoUrl;
    private ICommand? _command;

    /// <summary>
    /// Конструктор отправителя принимает в параметре ссылку на видео
    /// </summary>
    /// <param name="videoUrl">ссылка на видео</param>
    public CommandManager(string videoUrl)
    {
        if (!string.IsNullOrWhiteSpace(videoUrl))
        {
            _videoUrl = videoUrl;
        }
        else
        {
            _videoUrl = string.Empty;
            Console.WriteLine("Invalid YouTube video ID or URL");
        }
    }

    /// <summary>
    /// Метод назначения команды текущей к выполнению
    /// </summary>
    /// <param name="command">объект команды</param>
    public void SetCommand(ICommand command)
    {
        _command = command;
    }

    /// <summary>
    /// Метод отправки команды
    /// </summary>
    public void Run()
    {
        if (!string.IsNullOrWhiteSpace(_videoUrl))
            _command?.Run(_videoUrl);
    }

    /// <summary>
    /// Метод отмены команды
    /// </summary>
    public void Cancel()
    {
        _command?.Cancel();
    }
}
